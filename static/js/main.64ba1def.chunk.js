(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{32:function(e,t,a){e.exports=a(48)},37:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(18),c=a.n(l),i=a(20),o=(a(37),a(8)),s=a(2),u=a(11),d=a(12),m=a(13),p=a(15),h=a(14),E=a(17),b=a.n(E),v=a(22),f=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).handleClick=function(){var t=e.props,a=t.history,n=t.getEmail;a.push("/carteira"),n(e.state)},e.enableButton=function(){var t=e.state,a=t.email,n=t.password.length>5;/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)&&n?e.setState({disabled:!1}):e.setState({disabled:!0})},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(u.a)({},n,r),(function(){e.enableButton()}))},e.state={email:"",password:"",disabled:!0},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state,t=e.disabled,a=e.password,n=e.email;return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"email",name:"email","data-testid":"email-input",value:n,onChange:this.handleChange}),r.a.createElement("input",{type:"password",name:"password",value:a,"data-testid":"password-input",onChange:this.handleChange}),r.a.createElement("button",{type:"button",disabled:t,onClick:this.handleClick},"Entrar"))}}]),a}(n.Component),g=Object(o.b)(null,(function(e){return{getEmail:function(t){return e(function(e){return{type:"ADD_USER",state:e}}(t))}}}))(f),y=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.expenses;return r.a.createElement("table",null,r.a.createElement("tr",null,["Descri\xe7\xe3o","Tag","M\xe9todo de pagamento","Valor","Moeda","C\xe2mbio utilizado","Valor convertido","Moeda de convers\xe3o","Editar/Excluir"].map((function(e){return r.a.createElement("th",{key:e},e)}))),e.map((function(e){var t=e.description,a=e.tag,n=e.method,l=e.value,c=e.id,i=Number(e.value)*Number(e.exchangeRates[e.currency].ask);return r.a.createElement("tr",{key:c},r.a.createElement("td",null,t),r.a.createElement("td",null,a),r.a.createElement("td",null,n),r.a.createElement("td",null,Number(l).toFixed(2)),r.a.createElement("td",null,e.exchangeRates[e.currency].name.split("/")[0]),r.a.createElement("td",null,Number(e.exchangeRates[e.currency].ask).toFixed(2)),r.a.createElement("td",null,i.toFixed(2)),r.a.createElement("td",null,"Real"))})))}}]),a}(n.Component),j=Object(o.b)((function(e){return{expenses:e.wallet.expenses}}))(y),x=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target,n=a.id,r=a.value;e.setState(Object(u.a)({},n,r))},e.handleClick=function(){var t=e.state.id;(0,e.props.getExpenses)(e.state),e.setState({id:t+1,value:"",description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"})},e.totalValue=function(){var t=e.props.expenses,a=0;return t.forEach((function(e){return a+=Number(e.value)*Number(e.exchangeRates[e.currency].ask)})),a.toFixed(2)},e.state={id:0,value:"",description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.getCurrencies)()}},{key:"render",value:function(){var e=this.props,t=e.userEmail,a=e.currencies,n=this.state,l=n.value,c=n.description,i=n.currency,o=n.method,s=n.tag,u=this.totalValue();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"User"," ",r.a.createElement("h2",{"data-testid":"email-field"},t)),r.a.createElement("div",null,r.a.createElement("p",{"data-testid":"total-field"},u),r.a.createElement("p",{"data-testid":"header-currency-field"},"BRL")),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"value"},"Valor",r.a.createElement("input",{type:"text",id:"value",value:l,"data-testid":"value-input",onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"description"},"Descri\xe7\xe3o",r.a.createElement("input",{type:"text",id:"description",value:c,"data-testid":"description-input",onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"currency"},"Moeda",r.a.createElement("select",{value:i,id:"currency",onChange:this.handleChange},a.map((function(e){return r.a.createElement("option",{value:e,key:e},e)})))),r.a.createElement("label",{htmlFor:"method"},"M\xe9todo de pagamento",r.a.createElement("select",{id:"method",value:o,"data-testid":"method-input",onChange:this.handleChange},r.a.createElement("option",null,"Dinheiro"),r.a.createElement("option",null,"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",null,"Cart\xe3o de d\xe9bito"))),r.a.createElement("label",{htmlFor:"tag"},"Categoria",r.a.createElement("select",{id:"tag",value:s,"data-testid":"tag-input",onChange:this.handleChange},r.a.createElement("option",null,"Alimenta\xe7\xe3o"),r.a.createElement("option",null,"Lazer"),r.a.createElement("option",null,"Trabalho"),r.a.createElement("option",null,"Transporte"),r.a.createElement("option",null,"Sa\xfade"))),r.a.createElement("button",{type:"submit",onClick:this.handleClick},"Adicionar despesa")),r.a.createElement("div",null,r.a.createElement(j,null)))}}]),a}(r.a.Component),C=Object(o.b)((function(e){return{userEmail:e.user.email,currencies:e.wallet.currencies,expenses:e.wallet.expenses}}),(function(e){return{getCurrencies:function(){return e(function(){var e=Object(v.a)(b.a.mark((function e(t){var a,n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://economia.awesomeapi.com.br/json/all");case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,r=Object.keys(n).filter((function(e){return"USDT"!==e})),t({type:"GET_CURRENCIES",state:r});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},getExpenses:function(t){return e(function(e){return function(){var t=Object(v.a)(b.a.mark((function t(a){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://economia.awesomeapi.com.br/json/all");case 2:return n=t.sent,t.next=5,n.json();case 5:r=t.sent,e.exchangeRates=r,a({type:"GET_EXPENSES",expenses:e});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))(x);var O=function(){return r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/carteira",component:C}),r.a.createElement(s.a,{exact:!0,path:"/",component:g}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var w=a(7),k=a(29),S=a(30),D=a(9),R={email:""},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USER":return Object(D.a)(Object(D.a)({},e),{},{email:t.state.email});default:return e}},N=a(31),T={currencies:[],expenses:[]},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CURRENCIES":return Object(D.a)(Object(D.a)({},e),{},{currencies:t.state});case"GET_EXPENSES":return Object(D.a)(Object(D.a)({},e),{},{expenses:[].concat(Object(N.a)(e.expenses),[t.expenses])});default:return e}},M=Object(w.combineReducers)({user:F,wallet:U}),A=Object(w.createStore)(M,Object(k.composeWithDevTools)(Object(w.applyMiddleware)(S.a)));c.a.render(r.a.createElement(i.a,null,r.a.createElement(o.a,{store:A},r.a.createElement(O,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.64ba1def.chunk.js.map